
dependencies {
}

subprojects {
    //apply plugin: 'java'
    apply plugin: 'base'

    //compileJava.doLast {

            //println "I'm $task.project.name and I'm compiling java"
    //}
    task dist(type: Zip) {
        //println "zipping source/${task.project.name}/"
        from "stroomContent/"
        archiveName "${project.name}.zip"
    }

    configurations {
        distConfig
        compileSource 
    }

    artifacts {
        //compileSource dist
        distConfig dist
    }

    //sourceSets {
        //compileSource 

    
    task copyPack(type: Copy, dependsOn: dist) {
        from project.file('build/distributions')
        into 'target'
    }

    task buildDeps(type: Copy) {
        from configurations.compileSource
        into project.file('target')
    }

    //task copyDeps(dependsOn: buildDeps) {
    ////task copyDeps() {
        //doLast {
            //configurations.compileSource.each { dep -> 
                //def x = project.file('.').getAbsolutePath()
                //println "file $x"
                //println "compileSource $dep"
                //copy {
                    //from "$dep.name"
                    //into 'target'
                //}
            //}
            //configurations.distConfig.each { dep -> 
                //println "distConfig $dep"
            //}
        //}
    //}


    //task copyAll(dependsOn: [copyDeps, copyPack])
    task copyAll(dependsOn: [buildDeps, copyPack])

    task printDeps() {
        doLast {
            configurations.compileSource.each { dep -> 
                println "compileSource $dep"
            }
        }
    }

    //task bundle(type: Zip, dependsOn: dist) {
        //into "./target/${project.name}-bundle.zip"
        //from configurations.compileSource
    //}
}

allprojects {
    task hello {
        doLast { task ->
            println "I'm $task.project.name"
        }
    }

}
    
